/**
* vue-app-effect v1.0.3
* https://github.com/JooZh/vue-app-effect
* Released under the MIT License.
*/
function css(){return"\n    .vue-app-effect-out-enter-active,\n    .vue-app-effect-out-leave-active,\n    .vue-app-effect-in-enter-active,\n    .vue-app-effect-in-leave-active {\n      will-change: transform;\n      transition: all 500ms cubic-bezier(0.075, 0.82, 0.165, 1) ;\n      bottom: 0;\n      top: 0;\n      position: absolute;\n      backface-visibility: hidden;\n      perspective: 1000;\n    }\n    .vue-app-effect-out-enter {\n      opacity: 0;\n      transform: translate3d(-70%, 0, 0);\n    }\n    .vue-app-effect-out-leave-active {\n      opacity: 0 ;\n      transform: translate3d(70%, 0, 0);\n    }\n    .vue-app-effect-in-enter {\n      opacity: 0;\n      transform: translate3d(70%, 0, 0);\n    }\n    .vue-app-effect-in-leave-active {\n      opacity: 0;\n      transform: translate3d(-70%, 0, 0);\n    }\n  "}function appendCss(){var e=css(),t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var VnodeCache=function(e,t){return{name:"vnode-cache",abstract:!0,props:{},data:function(){return{routerLen:0,route:{},to:{},from:{},tabBar:t,paths:[]}},computed:{},watch:{route:function(e,t){var n=this;this.to=e,this.from=t,-1===this.tabBar.findIndex(function(e){return e===n.$route.fullPath})&&(this.paths.push(e.fullPath),this.paths=[].concat(_toConsumableArray(new Set(this.paths))))}},created:function(){var t=this;this.cache={},this.routerLen=this.$router.options.routes.length,this.route=this.$route,this.to=this.$route,e.$on("reverse",function(){t.reverse()})},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},methods:{reverse:function(){var e=this,t=this.paths.pop(),n=this.$router.options.routes,a=this.tabBar.findIndex(function(t){return t===e.$route.fullPath}),r=n.findIndex(function(e){return e.path===t});-1===a&&r>=this.routerLen&&(delete window.$VueAppEffect[t],window.$VueAppEffect.count-=1);var o=-1===a?this.$route.fullPath:"";this.cache[o]&&(this.cache[t].componentInstance.$destroy(),delete this.cache[t])}},render:function(){var e=this;this.route=this.$route;var t=this.$slots.default?this.$slots.default[0]:null;if(t){var n=-1===this.tabBar.findIndex(function(t){return t===e.$route.fullPath})?this.$route.fullPath:"/tab-bar";this.cache[n]?t.componentInstance=this.cache[n].componentInstance:this.cache[n]=t,t.data.keepAlive=!0}return t}}};function install(e,t,n){e.component("vnode-cache",VnodeCache(t,n)),e.prototype.$vueAppEffect={on:function(e,n){t.$on(e,n)},back:function(e){window.$VueAppEffect.paths.pop(),e.$router.replace({name:window.$VueAppEffect.paths.concat([]).pop()})},next:function(e){var t=e.path,n=[{path:t,name:t,component:{extends:e.component}}];-1===e.vm.$router.options.routes.findIndex(function(e){return e.path===t})&&(e.vm.$router.options.routes.push(n[0]),e.vm.$router.addRoutes(n)),e.vm.$router.replace({name:t,params:e.params})}}}function deriection(e,t,n,a){window.addEventListener("load",function(){e.replace({path:"/"});var t={count:0,paths:window.$VueAppEffect.paths};a&&(t[a]=9999999),window.$VueAppEffect=t}),window.$VueAppEffect={count:0,paths:[]},a&&(window.$VueAppEffect[a]=9999999);var r=!1,o=Date.now();document.addEventListener("touchend",function(){o=Date.now()}),["push","go","replace","forward","back"].forEach(function(t){var n=e[t].bind(e);e[t]=function(){r=!0;for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];n.apply(null,t)}}),e.beforeEach(function(e,a,i){if(/\/http/.test(e.path))window.location.href=e.path;else{var p=Number(window.$VueAppEffect[e.path]),c=Number(window.$VueAppEffect[a.path]);if(c=c||0,-1===n.findIndex(function(t){return t===e.path}))if(p>0)p>c?(t.$emit("forward",{type:"forward",isTabBar:!1,transitionName:"vue-app-effect-in"}),window.$VueAppEffect.paths.push(e.path)):!r&&Date.now()-o<377?t.$emit("reverse",{type:"",isTabBar:!1,transitionName:"vue-app-effect-out"}):t.$emit("reverse",{type:"reverse",isTabBar:!1,transitionName:"vue-app-effect-out"});else{var s=++window.$VueAppEffect.count;window.$VueAppEffect.count=s,window.$VueAppEffect[e.path]=s,t.$emit("forward",{type:"forward",isTabBar:!1,transitionName:"vue-app-effect-in"}),window.$VueAppEffect.paths.push(e.path)}else window.$VueAppEffect.paths.pop(),!r&&Date.now()-o<377?t.$emit("reverse",{type:"",isTabBar:!0,transitionName:"vue-app-effect-out"}):t.$emit("reverse",{type:"reverse",isTabBar:!0,transitionName:"vue-app-effect-out"}),window.$VueAppEffect.paths.push(e.path);i()}}),e.afterEach(function(){r=!1})}var index={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router,a=t.tabbar,r=t.common,o=void 0===r?"":r;if(n&&a){var i=new e;appendCss(),install(e,i,a),deriection(n,i,a,o)}else console.error("vue-app-effect need options: router, tabbar")}};export default index;